<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>
		</title>
		<style type="text/css">
			.cs95E872D0{text-align:left;text-indent:0pt;margin:0pt 0pt 0pt 0pt}
			.cs84FBA952{color:#000000;background-color:transparent;font-family:Calibri;font-size:17pt;font-weight:normal;font-style:normal;}
			.csB33285EC{color:#808080;background-color:transparent;font-family:Calibri;font-size:10pt;font-weight:normal;font-style:normal;}
			.cs14438CD8{text-align:left;text-indent:0pt;margin:0pt 0pt 0pt 0pt}
			.cs1B16EEB5{color:#000000;background-color:transparent;font-family:Calibri;font-size:11pt;font-weight:normal;font-style:normal;}
			.csA27DA275{color:#000000;background-color:transparent;font-family:Calibri;font-size:16pt;font-weight:bold;font-style:normal;}
			.cs9C490B4D{text-align:left;margin:0pt 0pt 0pt 18pt;list-style-type:disc;color:#000000;background-color:transparent;font-family:Arial;font-size:11pt;font-weight:normal;font-style:normal}
			.cs2D2816FE{}
			.csB9AF42A9{width:369.8pt;padding:1.95pt 3pt 1.95pt 3pt;border-top:1pt #A3A3A3 solid;border-right:1pt #A3A3A3 solid;border-bottom:1pt #A3A3A3 solid;border-left:1pt #A3A3A3 solid}
			.csDC4A80{color:#000000;background-color:transparent;font-family:Calibri;font-size:11pt;font-weight:bold;font-style:normal;}
			.csB6FDACF1{width:354.6pt;padding:1.95pt 3pt 1.95pt 3pt;border-top:1pt #A3A3A3 solid;border-right:1pt #A3A3A3 solid;border-bottom:1pt #A3A3A3 solid;border-left:1pt #A3A3A3 solid}
			.csD5D7D290{color:#000000;background-color:transparent;font-family:Arial;font-size:11pt;font-weight:normal;font-style:normal;}
			.cs2F445579{text-align:left;text-indent:0pt;margin:0pt 0pt 0pt 27pt}
			.csC44FAD32{width:318.85pt;padding:1.95pt 3pt 1.95pt 3pt;border-top:1pt #A3A3A3 solid;border-right:1pt #A3A3A3 solid;border-bottom:1pt #A3A3A3 solid;border-left:1pt #A3A3A3 solid}
			.cs3C224684{width:442.5pt;padding:1.95pt 3pt 1.95pt 3pt;border-top:1pt #A3A3A3 solid;border-right:1pt #A3A3A3 solid;border-bottom:1pt #A3A3A3 solid;border-left:1pt #A3A3A3 solid}
			.cs5FC355D3{color:#666666;background-color:transparent;font-family:Tahoma;font-size:8pt;font-weight:normal;font-style:normal;}
			.csCF6BBF71{color:#000000;background-color:transparent;font-family:Times New Roman;font-size:12pt;font-weight:normal;font-style:normal;}
			.cs7FC7682D{color:#969696;background-color:transparent;font-family:Arial;font-size:9pt;font-weight:normal;font-style:normal;}
		</style>
	</head>
	<body>
		<p class="cs95E872D0"><span class="cs84FBA952">DIY RFLink Working 1</span></p><p class="cs95E872D0"><span class="csB33285EC">11 August, 2018</span></p><p class="cs95E872D0"><span class="csB33285EC">23:11</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="csA27DA275">Components</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">Now all the individual components are working, we&#39;re going to create the first full working system on this page and test how well everything works .</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">The system&nbsp; consists of:</span></p><ul style="margin-top:0;margin-bottom:0;">
			<li class="cs9C490B4D"><span class="cs1B16EEB5">Domoticz Home Automation (on Windows, the next step is to move it to a Raspberry). </span></li><li class="cs9C490B4D"><span class="cs1B16EEB5">Domoticz Lite, Domotica, DomoFence, FireFox as smartphone apps</span></li><li class="cs9C490B4D"><span class="cs1B16EEB5">Wunderground weather information</span></li><li class="cs9C490B4D"><span class="cs1B16EEB5">ESP32 programmed as an RFLink device</span></li><li class="cs9C490B4D"><span class="cs1B16EEB5">QIAchip as 433 MHz receiver</span></li><li class="cs9C490B4D"><span class="cs1B16EEB5">Doorbell button as the 433 MHz transmitter</span></li><li class="cs9C490B4D"><span class="cs1B16EEB5">Several KaKu controllers and receivers</span></li><li class="cs9C490B4D"><span class="cs1B16EEB5">Several QIAchip (EV1527) controllers and receivers</span></li><li class="cs9C490B4D"><span class="cs1B16EEB5">Several PT2262 controllers and receivers</span></li><li class="cs9C490B4D"><span class="cs1B16EEB5">Doorbell controller and receiver</span></li></ul>
		<p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><table class="cs2D2816FE" border="0" cellspacing="0" cellpadding="0" style="border-collapse:collapse;">
			<tr>
				<td class="csB9AF42A9" valign="top" width="494"><p class="cs95E872D0"><span class="csDC4A80">Action</span></p></td><td class="csB6FDACF1" valign="top" width="473"><p class="cs95E872D0"><span class="csDC4A80">Serial Terminal</span></p></td></tr>
			<tr>
				<td class="csB9AF42A9" valign="top" width="494"><p class="cs95E872D0"><span class="cs1B16EEB5">Connect RFLink through an USB connection with a PC.</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">In the future this is planned to be possible from a webpage.</span></p></td><td class="csB6FDACF1" valign="top" width="473"><p class="cs95E872D0"><span class="cs1B16EEB5">&nbsp;</span></p></td></tr>
			<tr>
				<td class="csB9AF42A9" valign="top" width="494"><p class="cs95E872D0"><span class="cs1B16EEB5">Reboot RFLink either by command or reset button</span></p></td><td class="csB6FDACF1" valign="top" width="473"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image0.png" width="409" height="105" alt="" style="border-width:0px;" /></span></p></td></tr>
			<tr>
				<td class="csB9AF42A9" valign="top" width="494"><p class="cs95E872D0"><span class="cs1B16EEB5">Enter Learning_Mode=1</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">And see that no device is yet registered</span></p></td><td class="csB6FDACF1" valign="top" width="473"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image1.png" width="363" height="241" alt="" style="border-width:0px;" /></span></p></td></tr>
			<tr>
				<td class="csB9AF42A9" valign="top" width="494"><p class="cs95E872D0"><span class="cs1B16EEB5">Press a button on a remote control.</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">We see that the remote control is recognized but not registered</span></p></td><td class="csB6FDACF1" valign="top" width="473"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image2.png" width="326" height="38" alt="" style="border-width:0px;" /></span></p></td></tr>
			<tr>
				<td class="csB9AF42A9" valign="top" width="494"><p class="cs95E872D0"><span class="cs1B16EEB5">Press X</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">And now the device is registered</span></p></td><td class="csB6FDACF1" valign="top" width="473"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image3.png" width="229" height="52" alt="" style="border-width:0px;" /></span></p></td></tr>
			<tr>
				<td class="csB9AF42A9" valign="top" width="494"><p class="cs95E872D0"><span class="cs1B16EEB5">OR Press Y</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">And the device will be registered with pseudo random code</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">(so the Home Automation software can determine what will happen if an RF-transmitter key is pressed.</span></p></td><td class="csB6FDACF1" valign="top" width="473"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image4.png" width="343" height="148" alt="" style="border-width:0px;" /></span></p></td></tr>
			<tr>
				<td class="csB9AF42A9" valign="top" width="494"><p class="cs95E872D0"><span class="cs1B16EEB5">Repeat the last 2 steps for all other controlers that should be handled by Domoticz</span></p></td><td class="csB6FDACF1" valign="top" width="473"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image5.png" width="223" height="71" alt="" style="border-width:0px;" /></span></p></td></tr>
			<tr>
				<td class="csB9AF42A9" valign="top" width="494"><p class="cs95E872D0"><span class="cs1B16EEB5">After all controllers are registered, connect the RFLink to Domoticz.</span></p></td><td class="csB6FDACF1" valign="top" width="473"><p class="cs95E872D0"><span class="cs1B16EEB5">&nbsp;</span></p></td></tr>
		</table>
		<p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">Connect the hardware to Domoticz</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image6.png" width="761" height="620" alt="" style="border-width:0px;" /></span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">As the version is shown (not cirrectly, but that&#39;s a bug in Domoticz, you know that it&#39;s working.</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">You also can see in the log file, that it&#39;s connected::</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs2F445579"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image7.png" width="620" height="39" alt="" style="border-width:0px;" /></span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">Apparently there&#39;s some continuous handshake between Domoticz and RFLink, because if you hold the reset button of the ESP32 for more than one minute, the following appears in the log file:</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs2F445579"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image8.png" width="634" height="78" alt="" style="border-width:0px;" /></span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">Domoticz tests the availability of RFLink by sending on a regular base a Ping command and expecting Pong as an answer.</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><table class="cs2D2816FE" border="0" cellspacing="0" cellpadding="0" style="border-collapse:collapse;">
			<tr>
				<td class="csC44FAD32" valign="top" width="426"><p class="cs95E872D0"><span class="csDC4A80">Action</span></p></td><td class="cs3C224684" valign="top" width="590"><p class="cs95E872D0"><span class="csDC4A80">Screen</span></p></td></tr>
			<tr>
				<td class="csC44FAD32" valign="top" width="426"><p class="cs95E872D0"><span class="cs1B16EEB5">Add a KaKu switch (which is already registered in RFLink) to Domoticz.</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">&nbsp;There are several ways but this is the most easy one I found.</span></p></td><td class="cs3C224684" valign="top" width="590"><p class="cs95E872D0"><span class="cs1B16EEB5">&nbsp;</span></p></td></tr>
			<tr>
				<td class="csC44FAD32" valign="top" width="426"><p class="cs95E872D0"><span class="cs1B16EEB5">Goto the switches tab and press Learn Light/Switch</span></p></td><td class="cs3C224684" valign="top" width="590"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image9.png" width="569" height="128" alt="" style="border-width:0px;" /></span></p></td></tr>
			<tr>
				<td class="csC44FAD32" valign="top" width="426"><p class="cs95E872D0"><span class="cs1B16EEB5">Press Learn Light/Switch</span></p></td><td class="cs3C224684" valign="top" width="590"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image10.png" width="401" height="555" alt="" style="border-width:0px;" /></span></p></td></tr>
			<tr>
				<td class="csC44FAD32" valign="top" width="426"><p class="cs95E872D0"><span class="cs1B16EEB5">Now press the KaKu button</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">Then fill in the popup shown on the right</span></p></td><td class="cs3C224684" valign="top" width="590"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image11.png" width="402" height="282" alt="" style="border-width:0px;" /></span></p></td></tr>
			<tr>
				<td class="csC44FAD32" valign="top" width="426"><p class="cs95E872D0"><span class="cs1B16EEB5">And you switch is implemented in Domoticz.</span></p></td><td class="cs3C224684" valign="top" width="590"><p class="cs95E872D0"><span class="csD5D7D290"><img src="DIY%20RFLink%20Working%201_files/image12.png" width="408" height="143" alt="" style="border-width:0px;" /></span></p><p class="cs95E872D0"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs95E872D0"><span class="cs5FC355D3">Screen clipping taken: 15-Aug-18, 9:07</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs95E872D0"><span class="cs1B16EEB5">&nbsp;</span></p></td></tr>
		</table>
		<p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs14438CD8"><span class="cs1B16EEB5">&nbsp;</span></p><p class="cs95E872D0"><span class="csCF6BBF71">&nbsp;</span></p><p class="cs95E872D0"><span class="cs7FC7682D">Created with Microsoft Office OneNote 2007<br/>One place for all your notes and information</span></p></body>
</html>
